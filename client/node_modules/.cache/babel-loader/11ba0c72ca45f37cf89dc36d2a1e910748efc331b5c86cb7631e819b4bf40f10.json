{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tazh/Desktop/Study/Record-Store/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tazh/Desktop/Study/Record-Store/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tazh/Desktop/Study/Record-Store/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{useMutation}from'@apollo/client';import{ADD_COMMENT}from'../../utils/mutations';import Auth from'../../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CommentForm=function CommentForm(_ref){var thoughtId=_ref.thoughtId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),commentText=_useState2[0],setCommentText=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),characterCount=_useState4[0],setCharacterCount=_useState4[1];var _useMutation=useMutation(ADD_COMMENT),_useMutation2=_slicedToArray(_useMutation,2),addComment=_useMutation2[0],error=_useMutation2[1].error;var handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$addComment,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return addComment({variables:{thoughtId:thoughtId,commentText:commentText,commentAuthor:Auth.getProfile().data.firstName}});case 4:_yield$addComment=_context.sent;data=_yield$addComment.data;setCommentText('');_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;if(name==='commentText'&&value.length<=280){setCommentText(value);setCharacterCount(value.length);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"What are your thoughts on this thought?\"}),Auth.loggedIn()?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"m-0 \".concat(characterCount===280||error?'text-danger':''),children:[\"Character Count: \",characterCount,\"/280\",error&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:error.message})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex-row justify-center justify-space-between-md align-center\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-9\",children:/*#__PURE__*/_jsx(\"textarea\",{name:\"commentText\",placeholder:\"Add your comment...\",value:commentText,className:\"form-input w-100\",style:{lineHeight:'1.5',resize:'vertical'},onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-block py-3\",type:\"submit\",children:\"Add Comment\"})})]})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"You need to be logged in to share your thoughts. Please\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"login\"}),\" or \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"signup.\"})]})]});};export default CommentForm;","map":{"version":3,"names":["React","useState","Link","useMutation","ADD_COMMENT","Auth","CommentForm","thoughtId","commentText","setCommentText","characterCount","setCharacterCount","addComment","error","handleFormSubmit","event","preventDefault","variables","commentAuthor","getProfile","data","firstName","console","handleChange","target","name","value","length","loggedIn","message","lineHeight","resize"],"sources":["/Users/tazh/Desktop/Study/Record-Store/client/src/components/CommentForm/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\n\nimport { ADD_COMMENT } from '../../utils/mutations';\n\nimport Auth from '../../utils/auth';\n\nconst CommentForm = ({ thoughtId }) => {\n  const [commentText, setCommentText] = useState('');\n  const [characterCount, setCharacterCount] = useState(0);\n\n  const [addComment, { error }] = useMutation(ADD_COMMENT);\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const { data } = await addComment({\n        variables: {\n          thoughtId,\n          commentText,\n          commentAuthor: Auth.getProfile().data.firstName,\n        },\n      });\n\n      setCommentText('');\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n\n    if (name === 'commentText' && value.length <= 280) {\n      setCommentText(value);\n      setCharacterCount(value.length);\n    }\n  };\n\n  return (\n    <div>\n      <h4>What are your thoughts on this thought?</h4>\n\n      {Auth.loggedIn() ? (\n        <>\n          <p\n            className={`m-0 ${\n              characterCount === 280 || error ? 'text-danger' : ''\n            }`}\n          >\n            Character Count: {characterCount}/280\n            {error && <span className=\"ml-2\">{error.message}</span>}\n          </p>\n          <form\n            className=\"flex-row justify-center justify-space-between-md align-center\"\n            onSubmit={handleFormSubmit}\n          >\n            <div className=\"col-12 col-lg-9\">\n              <textarea\n                name=\"commentText\"\n                placeholder=\"Add your comment...\"\n                value={commentText}\n                className=\"form-input w-100\"\n                style={{ lineHeight: '1.5', resize: 'vertical' }}\n                onChange={handleChange}\n              ></textarea>\n            </div>\n\n            <div className=\"col-12 col-lg-3\">\n              <button className=\"btn btn-primary btn-block py-3\" type=\"submit\">\n                Add Comment\n              </button>\n            </div>\n          </form>\n        </>\n      ) : (\n        <p>\n          You need to be logged in to share your thoughts. Please{' '}\n          <Link to=\"/login\">login</Link> or <Link to=\"/signup\">signup.</Link>\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default CommentForm;\n"],"mappings":"yZAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,WAAW,KAAQ,gBAAgB,CAE5C,OAASC,WAAW,KAAQ,uBAAuB,CAEnD,MAAOC,KAAI,KAAM,kBAAkB,CAAC,6IAEpC,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAAsB,IAAhBC,UAAS,MAATA,SAAS,CAC9B,cAAsCN,QAAQ,CAAC,EAAE,CAAC,wCAA3CO,WAAW,eAAEC,cAAc,eAClC,eAA4CR,QAAQ,CAAC,CAAC,CAAC,yCAAhDS,cAAc,eAAEC,iBAAiB,eAExC,iBAAgCR,WAAW,CAACC,WAAW,CAAC,8CAAjDQ,UAAU,kBAAIC,KAAK,kBAALA,KAAK,CAE1B,GAAMC,iBAAgB,6FAAG,iBAAOC,KAAK,+IACnCA,KAAK,CAACC,cAAc,EAAE,CAAC,sCAGEJ,WAAU,CAAC,CAChCK,SAAS,CAAE,CACTV,SAAS,CAATA,SAAS,CACTC,WAAW,CAAXA,WAAW,CACXU,aAAa,CAAEb,IAAI,CAACc,UAAU,EAAE,CAACC,IAAI,CAACC,SACxC,CACF,CAAC,CAAC,wCANMD,IAAI,mBAAJA,IAAI,CAQZX,cAAc,CAAC,EAAE,CAAC,CAAC,+EAEnBa,OAAO,CAACT,KAAK,aAAK,CAAC,oEAEtB,kBAhBKC,iBAAgB,6CAgBrB,CAED,GAAMS,aAAY,CAAG,QAAfA,aAAY,CAAIR,KAAK,CAAK,CAC9B,kBAAwBA,KAAK,CAACS,MAAM,CAA5BC,IAAI,eAAJA,IAAI,CAAEC,KAAK,eAALA,KAAK,CAEnB,GAAID,IAAI,GAAK,aAAa,EAAIC,KAAK,CAACC,MAAM,EAAI,GAAG,CAAE,CACjDlB,cAAc,CAACiB,KAAK,CAAC,CACrBf,iBAAiB,CAACe,KAAK,CAACC,MAAM,CAAC,CACjC,CACF,CAAC,CAED,mBACE,oCACE,+DAAgD,CAE/CtB,IAAI,CAACuB,QAAQ,EAAE,cACd,wCACE,WACE,SAAS,eACPlB,cAAc,GAAK,GAAG,EAAIG,KAAK,CAAG,aAAa,CAAG,EAAE,CACnD,+BAEeH,cAAc,QAC/BG,KAAK,eAAI,aAAM,SAAS,CAAC,MAAM,UAAEA,KAAK,CAACgB,OAAO,EAAQ,GACrD,cACJ,cACE,SAAS,CAAC,+DAA+D,CACzE,QAAQ,CAAEf,gBAAiB,wBAE3B,YAAK,SAAS,CAAC,iBAAiB,uBAC9B,iBACE,IAAI,CAAC,aAAa,CAClB,WAAW,CAAC,qBAAqB,CACjC,KAAK,CAAEN,WAAY,CACnB,SAAS,CAAC,kBAAkB,CAC5B,KAAK,CAAE,CAAEsB,UAAU,CAAE,KAAK,CAAEC,MAAM,CAAE,UAAW,CAAE,CACjD,QAAQ,CAAER,YAAa,EACb,EACR,cAEN,YAAK,SAAS,CAAC,iBAAiB,uBAC9B,eAAQ,SAAS,CAAC,gCAAgC,CAAC,IAAI,CAAC,QAAQ,yBAEvD,EACL,GACD,GACN,cAEH,+EAC0D,GAAG,cAC3D,KAAC,IAAI,EAAC,EAAE,CAAC,QAAQ,mBAAa,qBAAI,KAAC,IAAI,EAAC,EAAE,CAAC,SAAS,qBAAe,GAEtE,GACG,CAEV,CAAC,CAED,cAAejB,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}